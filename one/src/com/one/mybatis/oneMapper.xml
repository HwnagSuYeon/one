<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.one.mybatis.SHSMapper.xml">
	<select id="bestList" resultType="com.one.dto.ProductDTO">
		<!-- resultType=DB에서 받아오는 타입. 경로문제때문에 현업에서는 앨리어스대신 경로 그대로를 쓴다. -->
		<![CDATA[
			SELECT *
			FROM (SELECT * FROM tbl_product
			ORDER BY p_like DESC)
			WHERE ROWNUM <=4
		]]>
	</select>
	<select id="newList" resultType="com.one.dto.ProductDTO">
		<![CDATA[
			SELECT *
			FROM (SELECT * FROM tbl_product
			ORDER BY p_indate DESC)
			WHERE ROWNUM <=4
		]]>
	</select>
	<!-- 21. 매개변수로 전달받은 id값을 sql문에 바인딩 변수로 넣고 sql문 실행(DB로 이동) -->
	<select id="idCheck" parameterType="String" resultType="String">
	<!-- DB에서 받아오는 id값은 1개이기때문에 반환타입(result type)은 String -->
		SELECT id FROM tbl_member
		WHERE id = #{id}
	</select>
	<insert id="memInsert" parameterType="com.one.dto.MemberDTO">
		INSERT INTO tbl_member(id, pw, name, phone, zipcode, addr1, addr2)
		VALUES(#{id}, #{pw}, #{name}, #{phone}, #{zipcode}, #{addr1}, #{addr2})
	</insert>
	
	<select id="loginCheck" parameterType="com.one.dto.MemberDTO" resultType="com.one.dto.MemberDTO">
		SELECT * FROM tbl_member
		WHERE id = #{id} AND pw = #{pw}
	</select>
</mapper>